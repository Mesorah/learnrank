{% extends "templates/base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    {% include "authors/partials/head.html" %}
{% endblock head %}

{% block content %}
    <h1>{{ title }}</h1>

    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <form action="{% url form_action %}" class="author-form" method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">{% translate "Submit" %}</button>
    </form>

    {% if title_key == 'Sign Up' or title_key == 'Login' %}
        <div class="author-link">
            {% if is_signup %}
                <p>{% translate "Have an account?" %} <a class='login-link' href="{% url "authors:login" %}">{% translate "Click here" %}</a></p>
            {% else %}
                <p>{% translate "Don't you have an account?" %} <a class='sign-up-link' href="{% url "authors:signup" %}">{% translate "Click here" %}</a></p>
                <p>{% translate "Forgot your password?" %} <a class='sign-up-link' href="{% url "authors:password_reset" %}">{% translate "Click here" %}</a></p>
            {% endif %}
        </div>
    {% endif %}
    
    {% if title_key == 'Sign Up' %}
        <script src="{% url 'javascript-catalog' %}"></script>

        <script type="module">
            import { inicializeListener } from "{% static 'authors/js/forms/main.js' %}";
            document.addEventListener("DOMContentLoaded", () => {
                inicializeListener();
            });
        </script>
    {% endif %}
{% endblock content %}
